openapi: 3.0.0\ninfo:\n  title: OpenAI Agents SDK/ChatKit Integration API\n  version: 1.0.0\ndescription: API for integrating OpenAI Agents SDK and ChatKit with the RAG backend, enabling advanced conversational flows and agent orchestration.\n\nservers:\n  - url: /api\n    description: Local development server\n\npaths:\n  /agent-chat:\n    post:\n      summary: Interact with an OpenAI Agent for multi-turn conversations\n      operationId: agentChat\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required:\n                - user_message\n              properties:\n                user_message:\n                  type: string\n                  description: The user\'s message to the agent.\n                session_id:\n                  type: string\n                  format: uuid\n                  nullable: true\n                  description: Optional. The ID of the current chat session. If not provided, a new session will be initiated.\n                agent_id:\n                  type: string\n                  nullable: true\n                  description: Optional. The ID of a specific agent to interact with. If not provided, a default agent will be used.\n                chat_history:\n                  type: array\n                  items:\n                    $ref: \'#/components/schemas/ChatMessage\'\n                  nullable: true\                  description: Optional. Previous messages in the conversation to maintain context.\n      responses:\n        \'200\':\n          description: Successful agent response\n          content:\n            application/json:\n              schema:\n                $ref: \'#/components/schemas/AgentChatResponse\'\n        \'400\':\n          description: Invalid input\n          content:\n            application/json:\n              schema:\n                $ref: \'#/components/schemas/ErrorResponse\'\n        \'500\':\n          description: Internal server error\n          content:\n            application/json:\n              schema:\n                $ref: \'#/components/schemas/ErrorResponse\'\n\n  /chat:\n    post:\n      summary: Perform a standard RAG query\n      operationId: ragChat\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required:\n                - user_query\n              properties:\n                user_query:\n                  type: string\n                  description: The user\'s query for the RAG system.\n                chat_history:\n                  type: array\n                  items:\n                    $ref: \'#/components/schemas/ChatMessage\'\n                  nullable: true\
                  description: Optional. Previous messages in the conversation to maintain context.\n      responses:\n        \'200\':\n          description: Successful RAG response\n          content:\n            application/json:\n              schema:\n                $ref: \'#/components/schemas/RAGChatResponse\'\n        \'400\':\n          description: Invalid input\n          content:\n            application/json:\n              schema:\n                $ref: \'#/components/schemas/ErrorResponse\'\n        \'500\':\n          description: Internal server error\n          content:\n            application/json:\n              schema:\n                $ref: \'#/components/schemas/ErrorResponse\'\n\n  /explain-selection:\n    post:\n      summary: Get context-aware explanations for selected text\n      operationId: explainSelection\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required:\n                - selected_text\n              properties:\n                selected_text:\n                  type: string\n                  description: The text selected by the user for explanation.\n                user_query:\n                  type: string\n                  nullable: true\
                  description: Optional. A follow-up question related to the selected text.\n      responses:\n        \'200\':\n          description: Successful explanation response\n          content:\n            application/json:\n              schema:\n                $ref: \'#/components/schemas/RAGChatResponse\'\n        \'400\':\n          description: Invalid input\n          content:\n            application/json:\n              schema:\n                $ref: \'#/components/schemas/ErrorResponse\'\n        \'500\':\n          description: Internal server error\n          content:\n            application/json:\n              schema:\n                $ref: \'#/components/schemas/ErrorResponse\'\n\ncomponents:\n  schemas:\n    ChatMessage:\n      type: object\n      properties:\n        role:\n          type: string\n          enum: [\'user\', \'assistant\']\n          description: The role of the sender.\n        content:\n          type: string\n          description: The content of the message.\n    AgentChatResponse:\n      type: object\n      properties:\n        response_message:\n          type: string\n          description: The agent\'s response message.\n        session_id:\n          type: string\n          format: uuid\n          description: The ID of the chat session.\n        agent_state:\n          type: object\n          description: The current state of the agent (e.g., tool calls, next steps).\n          additionalProperties: true\n    RAGChatResponse:\n      type: object\n      properties:\n        response_message:\n          type: string\n          description: The RAG system\'s response message.\n        source_documents:\n          type: array\n          items:\n            type: object\n            properties:\n              file_path:\n                type: string\n              section:\n                type: string\n              text_snippet:\n                type: string\n          description: List of source documents used for the response.\n    ErrorResponse:\n      type: object\n      properties:\n        detail:\n          type: string\n          description: A detailed error message.