{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RAG Vector Payload",
  "description": "Schema for the JSON object sent to Qdrant/FastAPI",
  "type": "array",
  "items": {
    "type": "object",
    "required": ["id", "content", "metadata"],
    "properties": {
      "id": {
        "type": "string",
        "format": "uuid",
        "description": "Deterministic UUID based on content hash"
      },
      "content": {
        "type": "string",
        "description": "The actual text chunk to be embedded"
      },
      "metadata": {
        "type": "object",
        "properties": {
          "source_file": { "type": "string" },
          "section_header": { "type": "string" },
          "book_title": { "type": "string" },
          "week": { "type": ["string", "integer"] },
          "difficulty": { "type": "string", "enum": ["beginner", "intermediate", "advanced"] },
          "topics": { 
            "type": "array",
            "items": { "type": "string" }
          },
          "hardware_required": { "type": "boolean" }
        }
      }
    }
  }
}